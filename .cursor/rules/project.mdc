---
description: Overview of the project and codebase
alwaysApply: true
---

# Project

## Overview

The goal of the project is to develop Drupal Canvas, a Drupal module with a
React UI for visual site building and JavaScript developer tooling for building
UI components.

Drupal Canvas enables site builders without Drupal experience to easily theme
and build their entire website using only their browser, without the need to
write code beyond basic JSX and CSS. With Drupal Canvas, content creators are
able to compose content on any part of the page without relying on developers.

## Code Components

Code Components are a component source in Drupal Canvas that allows users to
write and edit component code directly in the in-browser code editor. They are
built with React and Tailwind CSS. When edited in the browser, compilation and
Tailwind CSS builds happen client-side using WebAssembly. The CLI tool
(`packages/cli`) allows syncing Code Components with a local codebase for
development outside of the browser.

## Codebase

The codebase contains not only the code for Drupal Canvas, but also an entire
Drupal website and environment set up to develop Drupal Canvas. There are two
Git repositories within the codebase:

1. **Environment: `/` (root)**: Drupal website installation managed with DDEV.
   This is the development environment which also contains all files that
   support AI assisted development, e.g. Cursor rules.
2. **Drupal Canvas: `web/modules/contrib/canvas`**: The Drupal Canvas monorepo,
   the work product of this codebase.

**Important:** Unless asked to work on the environment or files supporting AI
assisted development (for example, Cursor rules), always with in the Drupal
Canvas monorepo. Never update files inside of the `web/` folder other than
`web/modules/contrib/canvas`.

### The Drupal Canvas monorepo

The codebase is structured as follows:

1. **`web/modules/contrib/canvas`**: The Drupal Canvas module and its code
   repository. This directory contains all the Drupal backend (PHP) code, as
   well as other packages which are mentioned in this list separately.
2. **`web/modules/contrib/canvas/ui`**: Codebase for the Drupal Canvas module's
   UI. Key technologies: React 18, TypeScript, Redux Toolkit, Vite, Radix UI,
   and Radix Themes.
3. **`web/modules/contrib/canvas/packages/astro-hydration`**: Astro project that
   builds hydration libraries for powering Code Components.
4. **`web/modules/contrib/canvas/packages/cli`**: CLI tool for managing Code
   Components.
5. **`web/modules/contrib/canvas/packages/create`**: CLI for scaffolding
   codebases for working with Code Components.
6. **`web/modules/contrib/canvas/packages/drupal-canvas`**: Utilities and base
   components for building Code Components. Includes JSON:API client, data
   fetching helpers, and components like `FormattedText` and `Image`.
7. **`web/modules/contrib/canvas/packages/eslint-config`**: ESLint configuration
   for validating Code Components with custom rules and recommended configs.
8. **`web/modules/contrib/canvas/packages/extensions`**: JavaScript library for
   building Drupal Canvas extensions, which are embedded web applications that
   access and respond to data inside the Drupal Canvas app in real-time.
9. **`web/modules/contrib/canvas/packages/test-utils`**: Testing utilities for
   Drupal filesystem operations and command execution.
10. **`web/modules/contrib/canvas/packages/types`**: TypeScript type definitions
    for Drupal Canvas.
11. **`web/modules/contrib/canvas/packages/vite-plugin`**: Vite plugin for
    developing Code Components.
12. **`web/modules/contrib/canvas/packages/workbench`**: Local development app
    built with TanStack Start for working with Code Components and Canvas pages
    that are fully built with Code Components.
